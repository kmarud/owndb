{% extends "base.html" %}
{% load staticfiles %}

{% block title %}
    My projects - Owndb
{% endblock %}

{% block main-nav %}
<li class="active">
	<a href="{% url 'project-list' %}">My projects</a>
</li>
{% endblock %}

{% block container %}
<div class="container">
    <div class="row">
        <div class="col-lg-12">
        	<div class="panel panel-primary">
				<div class="panel-heading"></div>
				<div class="panel-body">
					
					<ul class="messages">
						{% for message in messages %}
						<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
						{% endfor %}
					</ul>
					
					<div class="col-lg-5">
						<h3>My projects</h3>       
						<form class="form-inline">
							<div class="form-group">
								<label class="sr-only" for="search">Search project</label>
								<input type="text" class="form-control" id="search" placeholder="Search project">
							</div>
							<button type="submit" class="btn btn-default">Search</button>
						</form>
					</div>
                    <div class="panel panel-default" style="margin-top: 120px">
						<div class="panel-heading">
							<h3 class="panel-title">List of available projects</h3>
							<a href="{% url 'project-add' %}">Add project</a>
						</div>
						<table class="table">
							<thead>
								<tr>
									<th></th>
									<th>Name</th>
									<th>Forms quantity</th>
									<th>Tasks</th>
								</tr>
							</thead>
							<tbody>
								{% for entry in project_list %}
								<tr>
									<th><img src="{% static "img/web-design.png" %}" class="img-rounded center-block"></th>
									<td><a href="{% url 'form-list' entry.pk %}">{{ entry.title }}</a></td>
									<td>{{ entry.form_set.count }}</td>
									<td>
										<a href="{% url 'project-edit' entry.pk %}">Edit project</a>
									</td>
								</tr>
								{% endfor  %}
							</tbody>
						</table>
                    </div>
					<nav>
						<ul class="pagination">
						{% if is_paginated %}
							{% if page_obj.has_previous %}
								<li class="enabled"><a href="{% url 'project-list' page_obj.previous_page_number %}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
							{% endif %}
							{% if page_obj.has_next %}
								<li class="enabled"><a href="{% url 'project-list' page_obj.next_page_number %}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
							{% endif %}
						{% endif %}
						</ul>
					</nav>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}