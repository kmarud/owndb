
{% extends "base.html" %}

{% block title %}
    Add new instance
{% endblock %}

{% block main-title %}
	<a class="navbar-brand topnav" href="{% url 'form-list' project.pk %}">{{ project.title }}</a> <a class="navbar-brand topnav" href="{% url 'forminstance-list' project.pk form.pk %}">{{ form.title }}</a> <a class="navbar-brand topnav" >Add instance</a>
{% endblock %}

{% load staticfiles %}

{% load store_extras %}

{% block extra_css %}
{% endblock %}

{% block container %}
    <div class="forms">
        <div class="container">
		
			<h3>Add new instance</h3>
			<div id="loading"></div>
			<form id="add_forminstance" action="{% url 'forminstance-add' project.pk form.pk %}">
				{% csrf_token %}
				<input name="after_process" type="hidden" value="{% url 'forminstance-list' project.pk form.pk %}" />
				<table id="fields_render">
					<tbody>
						{% for field in fields %}
						<tr>
							<td class="field_render">
								{% if field.type|stringformat:"s" == "Text" %}
									{% with field.settings|split_all:";" as options %}
										{% if options.1|stringformat:"s" == "0" %}
											<input class="textcontent" type="text" placeholder="" {% if options.0|stringformat:"s" == "1" %}required {% endif %}/>
										{% else %}
											<textarea class="textcontent" {% if options.0|stringformat:"s" == "1" %}required="required" {% endif %}></textarea>
										{% endif %}
									{% endwith %}
								{% elif field.type|stringformat:"s" == "Number" %}
									{% with field.settings|split_all:";" as options %}
										{% if options.1|stringformat:"s" == "0" %}
											<input type="text" placeholder="" {% if options.0|stringformat:"s" == "1" %}required {% endif %}/>
										{% else %}
											<input type="number" placeholder="" {% if options.0|stringformat:"s" == "1" %}required {% endif %}/>
										{% endif %}
									{% endwith %}
								{% elif field.type|stringformat:"s" == "Choice" %}
									{% with field.settings|split_remove_first:";" as options %}
										{% for option in options %}
											<input type="radio" name="{{ field.pk }}" /> {{ option }}<br />
										{% endfor %}
									{% endwith %}
								{% elif field.type|stringformat:"s" == "Checkbox" %}
									{% with field.settings|split_remove_first:";" as options %}
										{% for option in options %}
											<input type="checkbox" /> {{ option }}<br />
										{% endfor %}
									{% endwith %}
								{% elif field.type|stringformat:"s" == "LabelText" %}
									<p class="textlabel" >{{ field.settings }}</p>
								{% elif field.type|stringformat:"s" == "Connection" %}
									<p>Here will be input with dynamic content from connected field. 
										<select class="temp_data_list">
										{% for item in temp_data_list %}
											<option value="{{ item.pk }}">{{ item.data }}</option>
										{% endfor %}
										</select>
									</p>
								{% else %}
									<p>{{ field.settings }}</p>
								{% endif %}
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
				<p>
					Complete form and click button below.
				</p>
				<p>
					<input id="submit_button" type="submit" value="Add instance" />
					<input id="cancel_button" type="button" value="Cancel" />
				</p>
			</form>
			
        </div>
    </div>
    <!-- /.forms -->
{% endblock %}
